!function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=9)}([function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(10)),o=r(i(32)),s=r(i(33));e.handler=new s.default;var a=document.getElementById("game"),u=new n.default(1280,720),l=new o.default(a,u),p=0;u.start(),requestAnimationFrame(function t(e){var i=e-p;p=e,u.update(i),l.draw(u.offset),requestAnimationFrame(t)})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.copy=function(){return new t(this.x,this.y)},t.prototype.times=function(e){return new t(this.x*e,this.y*e)},t}();e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={debug:!1,scale:3}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,i,r,n,o,s){var a=this;void 0===e&&(e=1),void 0===i&&(i=0),void 0===r&&(r=9),void 0===n&&(n=9),void 0===o&&(o=4),void 0===s&&(s=1),this.img=new Image,this.img.src=t,this.scale=e,this.frame=i,this.startFrame=i,this.frameCount=r,this.framesX=n,this.framesY=o,this.speed=s,this.animTime=(new Date).getTime(),this.img.onload=function(){a.subWidth=a.img.width/a.framesX,a.subHeight=a.img.height/a.framesY}}return t.prototype.draw=function(t){var e=(new Date).getTime();e>=this.animTime&&(this.frame++,this.animTime=e+1e3/this.speed),this.frame>this.startFrame+this.frameCount&&(this.frame=this.startFrame);var i=this.frame%this.framesX*this.subWidth,r=Math.floor(this.frame/this.framesX)*this.subHeight;t.drawImage(this.img,i,r,this.subWidth,this.subHeight,0,0,this.subWidth*this.scale,this.subHeight*this.scale)},t}();e.default=r},function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(2)),o=r(i(1)),s=function(){function t(t,e){this.pos=t.times(n.default.scale),this.size=e,this.direction=0,this.inDialogue=!1,this.locked=!1,this.lastPos=t.copy(),this.savedPos=t.copy(),this.savedDirection=this.direction}return t.prototype.update=function(t){},t.prototype.draw=function(t,e){n.default.debug&&this.debugDraw(t),this.lastPos.x=this.pos.x,this.lastPos.y=this.pos.y},t.prototype.debugDraw=function(t){t.fillStyle="#F99",t.fillRect(this.pos.x,this.pos.y,this.size.x,this.size.y)},t.prototype.lock=function(){this.locked=!0},t.prototype.unlock=function(){this.inDialogue||(this.locked=!1)},t.prototype.backstep=function(t){var e=this.collisionPoint(!0);t?e.x<t.pos.x||e.x>t.pos.x+t.size.x?this.pos.x=this.lastPos.x:this.pos.y=this.lastPos.y:(this.pos.x=this.lastPos.x,this.pos.y=this.lastPos.y)},t.prototype.collidesWith=function(t){var e=this.collisionPoint();return!!(e.x>t.pos.x&&e.x<t.pos.x+t.size.x&&e.y>t.pos.y&&e.y<t.pos.y+t.size.y)&&{pos:t.pos.copy(),size:t.size.copy()}},t.prototype.collisionPoint=function(t){return void 0===t&&(t=!1),new o.default((t?this.lastPos.x:this.pos.x)+.5*this.size.x,(t?this.lastPos.y:this.pos.y)+.8*this.size.y)},t.prototype.savePos=function(){this.savedPos=this.pos.copy(),this.savedDirection=this.direction},t.prototype.restorePos=function(t){void 0===t&&(t=!0),this.pos=this.savedPos.copy(),this.direction=this.savedDirection,t&&this.unlock()},t.prototype.attack=function(t,e){!e&&this.weapon&&(e=this.weapon);var i=e&&e.damage?e.damage:0,r=this.stats.atk+i;t.endure(r)},t.prototype.endure=function(t){this.stats.endure(t)},t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(){function t(t){this.menu=t,this.selected=[],this.active=!0,this.selected.push(this.menu[0]),r.handler.register(this)}return t.prototype.select=function(){var t=this.currentOption;t.hasOwnProperty("menu")&&t.menu.length?this.selected.push(t.menu[0]):t.hasOwnProperty("action")&&t.action(this)},t.prototype.back=function(){if(this.selected.length>1)return this.selected.pop();this.active=!1},t.prototype.previous=function(){var t=this.currentMenu,e=this.currentOption,i=t.reduce(function(t,i,r){return i===e?r:t},0);this.selected[this.selected.length-1]=0===i?t[t.length-1]:t[i-1]},t.prototype.next=function(){var t=this.currentMenu,e=this.currentOption,i=t.reduce(function(t,i,r){return i===e?r:t},0);i===t.length-1?this.selected[this.selected.length-1]=t[0]:this.selected[this.selected.length-1]=t[i+1]},t.prototype.hasSubMenu=function(){var t=this.currentOption;return t.menu&&t.menu.length},t.prototype.draw=function(t,e,i){},t.prototype.register=function(){var t=this;return{keyup:function(e){if(t.active){if("Escape"===e.key)return t.active=!1;switch(e.key){case"ArrowRight":case"Enter":t.select();break;case"ArrowLeft":case"Backspace":t.back();break;case"ArrowUp":t.previous();break;case"ArrowDown":t.next()}}}}},t.prototype.stop=function(){r.handler.unregister(this)},Object.defineProperty(t.prototype,"currentOption",{get:function(){return this.selected[this.selected.length-1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentMenu",{get:function(){return this.selected.length>1?this.selected[this.selected.length-2].menu:this.menu},enumerable:!0,configurable:!0}),t}();e.default=n},function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(2)),o=r(i(1)),s=function(){function t(t,e){this.pos=t||new o.default(0,0),this.size=e||new o.default(0,0)}return t.prototype.update=function(t){},t.prototype.draw=function(t){n.default.debug&&(t.strokeStyle="#F00",t.strokeRect(this.pos.x,this.pos.y,this.size.x,this.size.y))},t}();e.default=s},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(i(18)),a=o(i(4)),u=o(i(1)),l=o(i(3)),p=o(i(19)),h=o(i(8)),c=i(0),d={knight:p.default},f=function(t){function e(e){var i=t.call(this,new u.default(e.x,e.y),new u.default(e.width,e.height))||this,r=e.properties.filter(function(t){return"type"===t.name})[0].value,n=s.default[r];if(!n)throw new Error("Enemy data for "+name+" is not defined in enemies.json");i.type=r,i.data=n,i.dialogue=null,i.stats=new h.default(n.default.stats),i.defeated=!1;var o=d[i.type];return i.sprites=[new l.default(o,2,0,0,1,4,8),new l.default(o,2,3,0,1,4,8),new l.default(o,2,2,0,1,4,8),new l.default(o,2,0,0,1,4,8),new l.default(o,2,1,0,1,4,8)],i.direction=4,i}return n(e,t),Object.defineProperty(e.prototype,"dialogueName",{get:function(){return this.data.display_name},enumerable:!0,configurable:!0}),e.prototype.fight=function(t){this.defeated||c.handler.trigger("battle",{player:t,enemy:this})},e.prototype.update=function(t){},e.prototype.draw=function(e){t.prototype.draw.call(this,e),e.save(),e.translate(this.pos.x,this.pos.y),this.sprites[this.direction].draw(e),e.restore()},e}(a.default);e.default=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){for(var e in t)this["base_"+e]=t[e];this.lvl=1,this.experience=0,this.damage=0}return Object.defineProperty(t.prototype,"hp",{get:function(){return Math.max(0,this.base_hp-this.damage)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"atk",{get:function(){return this.base_atk},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"def",{get:function(){return this.base_def},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sp_atk",{get:function(){return this.base_sp_atk},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sp_def",{get:function(){return this.base_sp_def},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"spd",{get:function(){return this.base_spd},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"givesExperience",{get:function(){return this.base_hp+this.base_atk+this.base_def+this.base_sp_atk+this.base_sp_def+this.base_spd},enumerable:!0,configurable:!0}),t.prototype.endure=function(t){this.damage+=t},t.prototype.gainExperience=function(t){this.experience+=t},t}();e.default=r},function(t,e,i){i(0),t.exports=i(34)},function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(11)),o=r(i(21)),s=r(i(1)),a=r(i(25)),u=r(i(26)),l=i(0),p=r(i(28)),h=function(){function t(t,e){this.resolution=new s.default(t,e),this.resize(t,e),this.levelNumber=0,this.offset=new s.default(0,0),this.battle=null,this.state="start-menu",this.states=["start-menu","play","pause","inventory","battle"],this.menu=new a.default,this.player=new p.default(new s.default(75,75),new s.default(36,64)),l.handler.register(this)}return t.prototype.loadLevel=function(t){var e=t.obj.portal_to.match(/^(\d+)\.(\d+)$/),i=o.default[parseInt(e[1])][parseInt(e[2])],r=t.obj;this.level.reload(i,r)},t.prototype.start=function(){this.level=new n.default(o.default[0][0],this.player)},t.prototype.update=function(t){var e=this;if(this.menu.active?this.lock("start-menu"):this.player.inventory.active?this.lock("inventory"):this.battle?this.battle.active?this.battle.update(t):this.battle=null:this.unlock(),"playing"===this.state){var i=this.level.update(t);i.length&&i.forEach(function(t){(t.type="enter_portal")&&e.loadLevel(t)}),this.battle&&this.battle.active?(this.offset.x=0,this.offset.y=0):(this.offset.x=this.width/2-this.player.pos.x,this.offset.y=this.height/2-this.player.pos.y)}},t.prototype.resize=function(t,e){this.width=t,this.height=e},t.prototype.lock=function(t){this.state=t,this.player.lock()},t.prototype.unlock=function(){this.player.unlock(),this.state="playing"},t.prototype.register=function(){var t=this;return{battle:function(e){t.battle||(t.battle=new u.default(e.detail.player,e.detail.enemy))}}},t}();e.default=h},function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(12)),o=r(i(13)),s=r(i(2)),a=r(i(7)),u=function(){function t(t,e){this.player=e,this.inanimates=[],this.actors=[],this.dialogues=[],this.reload(t)}return t.prototype.reload=function(t,e){this.map&&this.map.destruct(),this.map=new o.default(t,n.default,this.player);var i=e?this.map.playerStarts[e.portal_from]:this.map.playerStarts["0.0"];this.player.pos.x=i.x*s.default.scale,this.player.pos.y=i.y*s.default.scale},t.prototype.update=function(t){var e=this;return this.entities.forEach(function(i){i.update(t),i instanceof a.default&&i.collidesWith(e.player)&&i.fight(e.player)}),this.dialogues.forEach(function(t,i){t.done&&e.dialogues.splice(i,1)}),this.map.update(t)},Object.defineProperty(t.prototype,"entities",{get:function(){return[this.player].concat(this.inanimates,this.actors,this.dialogues,this.map.npcs,this.map.enemies)},enumerable:!0,configurable:!0}),t}();e.default=u},function(t,e,i){t.exports=i.p+"img/dungeon_sheet.png"},function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(3)),o=r(i(14)),s=r(i(15)),a=r(i(7)),u=r(i(20)),l=r(i(1)),p=r(i(2)),h=i(0),c=function(){function t(t,e,i){var r=this;this.data=t,this.player=i,this.pos=new l.default(0,0),this.scale=p.default.scale,this.config={},this.renderable=new n.default(e,this.scale,0,240,24,10,0),this.playerClips=[],this.portals=[],this.npcs=[],this.enemies=[],this.playerStarts={},this.data.layers.forEach(function(t){"objectgroup"===t.type&&t.objects.forEach(function(e){var n=new l.default(e.x*r.scale,e.y*r.scale),p=new l.default(e.width*r.scale,e.height*r.scale),h=t.name.match(/^player_start_(\d+\.\d+)$/);"collision"===t.name?r.playerClips.push(new o.default(n,p)):"portal"===t.name?r.portals.push(new u.default(n,p,t)):"npcs"===t.name?r.npcs.push(new s.default(e,i)):"enemies"===t.name?r.enemies.push(new a.default(e)):"config"===t.name?r.config=e.properties:h&&(r.playerStarts[h[1]]=e)})})}return t.prototype.update=function(t){var e=this,i=[];return this.playerClips.forEach(function(t){var i=e.player.collidesWith(t);i&&e.player.backstep(i)}),this.portals.forEach(function(t){e.player.collidesWith(t)&&i.push({type:"enter_portal",obj:t})}),i},t.prototype.draw=function(t,e){var i=this;void 0===e&&(e=!1),this.data.layers.forEach(function(r){if("tilelayer"===r.type&&(!e||"above_player"===r.name)&&(e||"above_player"!==r.name)){var n=0,o=0;r.data.forEach(function(e,s){i.renderable.frame=e-1,n=s%r.width,o=Math.floor(s/r.width),t.save(),t.translate(i.pos.x+n*i.renderable.subWidth*i.renderable.scale,i.pos.y+o*i.renderable.subHeight*i.renderable.scale),i.renderable.draw(t),t.restore()})}})},t.prototype.destruct=function(){this.npcs.forEach(function(t){return h.handler.unregister(t)})},t}();e.default=c},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e,i){return t.call(this,e,i)||this}return n(e,t),e.prototype.draw=function(e){t.prototype.draw.call(this,e)},e}(o(i(6)).default);e.default=s},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(i(16)),a=o(i(4)),u=o(i(1)),l=o(i(17)),p=i(0),h=function(t){function e(e,i){var r=t.call(this,new u.default(e.x,e.y),new u.default(e.width,e.height))||this,n=e.properties.filter(function(t){return"name"===t.name})[0].value,o=s.default[n];if(!o)throw new Error("NPC data for "+n+" is not defined in npcs.json");return r.name=n,r.data=o,r.dialogue=null,r.playerRef=i,p.handler.register(r),r}return n(e,t),Object.defineProperty(e.prototype,"dialogueName",{get:function(){return this.data.display_name},enumerable:!0,configurable:!0}),e.prototype.speak=function(){!this.dialogue&&this.collidesWith(this.playerRef)&&(this.dialogue=new l.default(this.data.default.speech,this,[this.playerRef]))},e.prototype.update=function(t){this.dialogue&&this.dialogue.done?this.dialogue=null:this.dialogue&&this.dialogue.update(t)},e.prototype.draw=function(t,e){this.dialogue&&this.dialogue.draw(t,e)},e.prototype.register=function(){var t=this;return{keyup:function(e){" "!==e.key&&"Enter"!==e.key||t.speak()}}},e}(a.default);e.default=h},function(t){t.exports={murdoc:{display_name:"Murdoc",default:{speech:["You look lost.","What's that, you are lost?","Well, you're in The Desolate Cave.","Be careful. There are bandits running around here."]}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(){function t(t,e,i){this.texts=t,this.speaker=e,this.actors=i,this.currentText="",this.index=0,this.waiting=!1,this.done=!1,this.frameLength=1e3/24,this.timeStore=0,this.actors.push(this.speaker),r.handler.register(this),this.start()}return t.prototype.update=function(t){if(!this.waiting){for(this.timeStore+=t;this.timeStore>this.frameLength;)this.currentText=this.texts[this.index].substring(0,this.currentText.length+1),this.timeStore-=this.frameLength;return this.currentText===this.texts[this.index]?this.waiting=!0:void 0}},t.prototype.draw=function(t,e){t.save(),t.translate(32-e.x,48-e.y),t.font="30px Arial",t.fillStyle="#FFF",t.fillText(this.speaker.dialogueName+": "+this.currentText,0,0),t.restore()},t.prototype.start=function(){this.actors.forEach(function(t){t.lock(),t.inDialogue=!0})},t.prototype.stop=function(){this.actors.forEach(function(t){t.unlock(),t.inDialogue=!1}),r.handler.unregister(this)},t.prototype.register=function(){var t=this;return{keyup:function(e,i){"Enter"===e.key&&t.next(e),t.done&&t.stop()}}},t.prototype.next=function(t){this.waiting&&!this.done&&(this.index+1<this.texts.length?(this.index++,this.timeStore=0,this.currentText="",this.waiting=!1):this.done=!0)},t}();e.default=n},function(t){t.exports={knight:{display_name:"Knight",default:{stats:{hp:5,atk:2,def:0,sp_atk:0,sp_def:0,spd:0}}}}},function(t,e,i){t.exports=i.p+"img/knight.png"},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e,i,r){var n=t.call(this,e,i)||this;return r&&r.properties&&r.properties.forEach(function(t){n[t.name]=t.value}),n}return n(e,t),e.prototype.draw=function(e){t.prototype.draw.call(this,e)},e}(o(i(6)).default);e.default=s},function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(22)),o=r(i(23)),s=r(i(24)),a=[[n.default,o.default,s.default]];e.default=a},function(t){t.exports={height:18,infinite:!1,layers:[{data:[55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,0,0,0,0,0,0,55,55,55,55,0,0,0,0,0,0,0,0,0,0,0,0,55,55,55,55,0,0,0,0,0,0],height:18,id:19,name:"floor",opacity:1,type:"tilelayer",visible:!0,width:16,x:0,y:0},{data:[6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,30,31,31,31,31,31,31,31,31,31,31,31,31,31,31,32,54,0,0,0,0,0,0,0,0,0,0,0,0,0,0,56,54,0,0,0,0,238,238,238,238,0,0,0,0,0,0,56,54,0,0,238,238,238,238,238,238,0,0,0,0,238,238,56,54,0,0,238,238,238,238,238,238,0,0,0,0,238,238,56,54,0,0,238,238,238,238,238,238,0,0,0,0,238,238,56,54,0,0,238,238,238,238,238,238,0,0,0,0,238,238,56,54,0,0,238,238,238,238,238,238,0,0,0,0,238,238,56,54,0,0,238,238,238,238,238,238,0,0,0,0,238,238,56,54,0,0,238,238,238,238,238,238,0,0,0,0,238,238,56,54,0,0,238,238,238,238,238,238,0,0,0,0,238,238,56,54,0,0,238,238,0,238,238,238,0,0,0,0,238,238,56,54,0,0,0,0,0,0,0,0,0,0,0,0,0,0,56,54,0,0,0,0,0,0,0,0,0,0,0,0,0,0,56,78,79,79,79,79,79,10,0,0,9,79,79,79,79,79,80,26,26,26,26,26,26,54,0,0,56,26,26,26,26,26,26,26,26,26,26,26,26,54,0,0,56,26,26,26,26,26,26],height:18,id:20,name:"walls",opacity:1,type:"tilelayer",visible:!0,width:16,x:0,y:0},{draworder:"topdown",id:10,name:"player_start_0.1",objects:[{height:20,id:46,name:"",rotation:0,type:"",visible:!0,width:8,x:124,y:260}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0},{draworder:"topdown",id:11,name:"player_start_0.0",objects:[{height:32,id:44,name:"",rotation:0,type:"",visible:!0,width:12,x:122,y:112}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0},{draworder:"topdown",id:12,name:"config",objects:[],opacity:1,properties:[{name:"level",type:"string",value:"0.0"}],type:"objectgroup",visible:!0,x:0,y:0},{draworder:"topdown",id:9,name:"portal",objects:[{height:8,id:29,name:"",rotation:0,type:"",visible:!0,width:40,x:108,y:280}],opacity:1,properties:[{name:"portal_from",type:"string",value:"0.0"},{name:"portal_to",type:"string",value:"0.1"}],type:"objectgroup",visible:!0,x:0,y:0},{draworder:"topdown",id:5,name:"collision",objects:[{height:32,id:47,name:"",rotation:0,type:"",visible:!0,width:255.636363636364,x:.363636363636364,y:0},{height:224,id:49,name:"",rotation:0,type:"",visible:!0,width:14,x:242,y:32},{height:224,id:50,name:"",rotation:0,type:"",visible:!0,width:16,x:0,y:32},{height:14,id:51,name:"",rotation:0,type:"",visible:!0,width:93,x:151,y:242},{height:14,id:52,name:"",rotation:0,type:"",visible:!0,width:93,x:12,y:242},{height:46,id:54,name:"",rotation:0,type:"",visible:!0,width:16,x:148,y:242},{height:46,id:55,name:"",rotation:0,type:"",visible:!0,width:16,x:92,y:242}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:21,nextobjectid:56,orientation:"orthogonal",renderorder:"right-down",tiledversion:"1.2.3",tileheight:16,tilesets:[{firstgid:1,source:"C:/Users/Anthony/Desktop/maps/dungeon_tiles.tsx"}],tilewidth:16,type:"map",version:1.2,width:16}},function(t){t.exports={height:20,infinite:!1,layers:[{data:[55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55],height:20,id:12,name:"floor",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{data:[6,7,7,7,7,7,7,7,7,7,7,7,8,26,26,26,26,26,54,0,56,26,26,26,26,26,26,26,26,26,26,26,30,31,31,31,31,31,31,31,31,31,31,31,32,26,26,26,6,7,58,0,57,7,7,7,7,7,7,7,7,7,7,8,54,0,213,0,0,0,0,213,0,0,0,0,56,26,26,26,30,31,82,0,81,31,31,31,31,31,31,31,31,31,31,32,54,213,213,213,213,19,20,213,0,0,0,0,56,26,26,26,54,0,0,0,0,0,0,0,0,0,0,0,0,0,0,56,54,213,213,213,213,43,44,213,0,0,0,0,56,26,26,26,54,0,0,0,0,0,0,0,0,9,79,79,79,10,0,56,54,213,213,213,213,67,68,213,0,0,0,0,56,26,26,26,54,0,0,0,0,0,0,0,0,56,26,26,26,54,0,56,54,213,213,213,213,0,0,213,0,0,0,0,56,26,26,26,54,0,0,0,0,0,0,0,0,56,26,26,26,54,0,56,54,0,213,213,213,19,20,0,0,0,0,0,56,26,26,26,54,0,0,0,0,0,0,0,0,56,26,26,26,54,0,56,54,0,213,213,213,43,44,0,0,0,0,0,56,26,26,26,78,79,79,79,79,79,79,79,79,80,26,26,26,54,0,56,54,0,0,0,0,67,68,0,0,0,0,0,57,7,7,7,7,7,7,7,7,7,7,7,7,106,7,7,7,58,0,56,54,0,0,0,0,0,0,0,0,0,0,0,81,31,31,31,31,31,31,31,31,31,31,31,31,129,31,31,31,82,0,56,54,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,56,78,79,79,79,10,0,0,9,79,79,79,79,79,79,79,10,0,9,79,79,79,79,79,79,79,79,79,79,79,79,79,80,26,26,26,26,54,0,0,56,26,26,26,26,26,26,26,54,0,56,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,54,0,0,56,26,26,26,26,26,26,26,54,0,57,7,7,7,7,7,7,7,7,7,7,7,7,7,8,26,26,26,26,54,0,0,56,26,26,26,26,26,26,26,54,0,81,31,31,31,31,31,31,31,31,31,31,31,31,31,32,26,26,26,26,54,0,0,56,26,26,26,26,26,26,26,54,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,56,26,26,26,26,54,0,0,56,26,26,26,26,26,26,26,78,79,79,79,79,79,79,79,79,79,79,10,0,0,189,0,56,26,26,26,26,54,0,0,56,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,54,0,0,0,0,56,26,26,26,26,54,0,0,56,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,78,79,79,79,79,80],height:20,id:13,name:"walls",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{draworder:"topdown",id:6,name:"player_start_0.0",objects:[{height:24,id:14,name:"",rotation:0,type:"",visible:!0,width:8,x:309,y:8}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0},{draworder:"topdown",id:14,name:"npcs",objects:[{height:16,id:37,name:"",properties:[{name:"name",type:"string",value:"murdoc"}],rotation:0,type:"",visible:!0,width:16,x:464,y:272}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0},{draworder:"topdown",id:15,name:"enemies",objects:[{height:20,id:38,name:"",properties:[{name:"type",type:"string",value:"knight"}],rotation:0,type:"",visible:!0,width:10,x:288,y:64}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0},{draworder:"topdown",id:8,name:"player_start_0.2",objects:[{height:24,id:16,name:"",rotation:0,type:"",visible:!0,width:8,x:92,y:288}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0},{draworder:"topdown",id:7,name:"config",objects:[],opacity:1,properties:[{name:"level",type:"string",value:"0.1"}],type:"objectgroup",visible:!0,x:0,y:0},{draworder:"topdown",id:3,name:"collision",objects:[{height:126,id:19,name:"",rotation:0,type:"",visible:!0,width:80,x:0,y:194},{height:126,id:22,name:"",rotation:0,type:"",visible:!0,width:144,x:112,y:194},{height:62,id:23,name:"",rotation:0,type:"",visible:!0,width:240,x:272,y:194},{height:46,id:24,name:"",rotation:0,type:"",visible:!0,width:176,x:256,y:274},{height:64,id:25,name:"",rotation:0,type:"",visible:!0,width:13,x:499,y:256},{height:14,id:26,name:"",rotation:0,type:"",visible:!0,width:67,x:432,y:306},{height:138,id:27,name:"",rotation:0,type:"",visible:!0,width:73,x:196,y:0},{height:46,id:28,name:"",rotation:0,type:"",visible:!0,width:281,x:196,y:130},{height:66,id:29,name:"",rotation:0,type:"",visible:!0,width:73,x:404,y:64},{height:48,id:30,name:"",rotation:0,type:"",visible:!0,width:188,x:324,y:0},{height:146,id:31,name:"",rotation:0,type:"",visible:!0,width:11,x:501,y:48},{height:32,id:32,name:"",rotation:0,type:"",visible:!0,width:196,x:0,y:0},{height:162,id:33,name:"",rotation:0,type:"",visible:!0,width:13,x:0,y:32},{height:40,id:34,name:"",rotation:0,type:"",visible:!0,width:26,x:83,y:51},{height:40,id:35,name:"",rotation:0,type:"",visible:!0,width:26,x:83,y:115},{height:48,id:36,name:"",rotation:0,type:"",visible:!0,width:33,x:269,y:0}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0},{draworder:"topdown",id:5,name:"portal",objects:[{height:8,id:11,name:"",properties:[{name:"portal_to",type:"string",value:"1.0"}],rotation:0,type:"",visible:!0,width:22,x:302,y:0}],opacity:1,properties:[{name:"portal_from",type:"string",value:"0.1"},{name:"portal_to",type:"string",value:"0.0"}],type:"objectgroup",visible:!0,x:0,y:0},{draworder:"topdown",id:9,name:"portal",objects:[{height:8,id:18,name:"",properties:[{name:"portal_to",type:"string",value:"1.0"}],rotation:0,type:"",visible:!0,width:32,x:80,y:312}],opacity:1,properties:[{name:"portal_from",type:"string",value:"0.1"},{name:"portal_to",type:"string",value:"0.2"}],type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:16,nextobjectid:39,orientation:"orthogonal",renderorder:"right-down",tiledversion:"1.2.3",tileheight:16,tilesets:[{firstgid:1,source:"C:/Users/Anthony/Desktop/maps/dungeon_tiles.tsx"}],tilewidth:16,type:"map",version:1.2,width:32}},function(t){t.exports={height:16,infinite:!1,layers:[{data:[55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55],height:16,id:3,name:"floor",opacity:1,type:"tilelayer",visible:!0,width:24,x:0,y:0},{data:[6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,30,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,32,54,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,56,54,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,56,54,0,0,0,9,79,79,79,79,79,10,0,0,9,79,79,79,79,79,79,10,0,0,56,0,0,0,0,56,6,7,7,7,7,58,0,0,57,7,7,7,7,7,8,54,0,0,56,0,0,0,0,56,30,31,31,31,31,82,0,0,81,31,31,31,31,31,32,54,0,0,56,54,0,0,0,56,54,0,0,0,0,0,0,0,0,0,0,0,0,0,56,54,0,0,56,54,0,0,0,56,54,0,0,0,0,0,0,0,0,0,0,0,0,0,56,54,0,0,56,54,0,0,0,56,54,0,0,0,0,0,0,0,0,0,0,0,0,0,56,54,0,0,56,54,0,0,0,56,78,79,79,79,79,79,79,79,79,79,79,79,79,79,80,54,0,0,56,54,0,0,0,57,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,58,0,0,56,54,0,0,0,81,31,169,31,169,31,169,31,169,31,169,31,169,31,169,31,82,0,0,56,54,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,56,54,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,56,78,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,80],height:16,id:4,name:"walls",opacity:1,type:"tilelayer",visible:!0,width:24,x:0,y:0},{draworder:"topdown",id:5,name:"collision",objects:[{height:32,id:1,name:"",rotation:0,type:"",visible:!0,width:384,x:0,y:0},{height:96,id:2,name:"",rotation:0,type:"",visible:!0,width:0,x:384,y:16},{height:224,id:4,name:"",rotation:0,type:"",visible:!0,width:16,x:368,y:32},{height:144,id:5,name:"",rotation:0,type:"",visible:!0,width:16,x:0,y:112},{height:48,id:6,name:"",rotation:0,type:"",visible:!0,width:16,x:0,y:32},{height:48,id:9,name:"",rotation:0,type:"",visible:!0,width:32,x:64,y:112},{height:48,id:10,name:"",rotation:0,type:"",visible:!0,width:32,x:304,y:112},{height:37,id:12,name:"",rotation:0,type:"",visible:!0,width:128,x:208,y:75.25},{height:37,id:13,name:"",rotation:0,type:"",visible:!0,width:112,x:64,y:75},{height:48,id:14,name:"",rotation:0,type:"",visible:!0,width:272,x:64,y:160},{height:16,id:16,name:"",rotation:0,type:"",visible:!0,width:352,x:16,y:240}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0},{draworder:"topdown",id:6,name:"portal",objects:[{height:32,id:18,name:"",properties:[{name:"portal_from",type:"string",value:"0.2"},{name:"portal_to",type:"string",value:"0.1"}],rotation:0,type:"",visible:!0,width:8,x:0,y:80}],opacity:1,properties:[{name:"portal_from",type:"string",value:"0.2"},{name:"portal_to",type:"string",value:"0.1"}],type:"objectgroup",visible:!0,x:0,y:0},{draworder:"topdown",id:7,name:"player_start_0.1",objects:[{height:32,id:19,name:"",rotation:0,type:"",visible:!0,width:8,x:8,y:80}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:8,nextobjectid:20,orientation:"orthogonal",renderorder:"right-down",tiledversion:"1.2.3",tileheight:16,tilesets:[{firstgid:1,source:"C:/Users/Anthony/Desktop/maps/dungeon_tiles.tsx"}],tilewidth:16,type:"map",version:1.2,width:24}},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(){return t.call(this,[{type:"start",description:"Press Enter to Start!",action:function(t){t.active=!1}},{type:"load",description:"Load Saved State (doesn't work yet)",action:function(t){}}])||this}return n(e,t),e.prototype.draw=function(t,e,i){var r=this;t.save(),t.translate(-i.x,-i.y),t.fillStyle="rgba(0, 0, 0, .85)",t.fillRect(0,0,e.x,e.y),t.fillStyle="#FFF",t.textAlign="center",this.menu.forEach(function(i,n){var o=r.menu[n],s=o===r.currentOption;s?(t.shadowColor="#FFF",t.shadowOffsetX=2,t.shadowOffsetY=2,t.shadowBlur=4,t.font="bold 42px Arial"):t.font="42px Arial",t.fillText(s?"▶ "+o.description:o.description,e.x/2,e.y/(r.menu.length-n)*.5)}),t.restore()},e}(o(i(5)).default);e.default=s},function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(27)),o=r(i(1)),s=i(0),a=function(){function t(t,e){this.active=!0,this.player=t,this.player.savePos(),this.player.pos.x=64,this.player.pos.y=128,this.player.direction=4,this.player.lock(),this.enemy=e,this.enemy.savePos(),this.enemy.pos.x=320,this.enemy.pos.y=0,this.enemy.direction=2,this.enemy.lock(),this.playersTurn=this.player.stats.spd>this.enemy.stats.spd,this.battleMenu=this.getBattleMenu(),s.handler.register(this)}return t.prototype.cycle=function(){this.playersTurn=!this.playersTurn,this.playersTurn||s.handler.trigger("battleAction",this)},t.prototype.getBattleMenu=function(){return new n.default({type:"Items",menu:[]},{type:"Attack",menu:this.player.weapon?[this.player.weapon]:[]},{type:"Spells",menu:this.player.spells},{type:"Other",menu:["Defend","Run Away"]})},t.prototype.update=function(t){},t.prototype.draw=function(t,e){var i=e.x,r=e.y,n=new o.default(i/2-128-64,r/2-64-64);t.save(),t.fillStyle="#ccc",t.fillRect(0,0,i,r),t.fillStyle="#FFF",t.textAlign="center",t.restore(),t.save(),t.translate(n.x,n.y),this.player.draw(t),this.enemy.draw(t),t.restore(),this.drawUiBar(t),this.drawEnemyUiBar(t,i,r),this.playersTurn&&this.battleMenu.draw(t,new o.default(0,0),n,this.player)},t.prototype.drawUiBar=function(t){t.save(),t.fillStyle="#000",t.fillRect(0,0,512,48),t.fillStyle="#FFF",t.font="20px Arial",t.fillText("HP : "+this.player.stats.hp,16,32),t.restore()},t.prototype.drawEnemyUiBar=function(t,e,i){t.save(),t.translate(e-512,0),t.fillStyle="#000",t.fillRect(0,0,512,48),t.fillStyle="#FFF",t.font="20px Arial",t.fillText("HP : "+this.enemy.stats.hp,16,32),t.restore()},t.prototype.register=function(){var t=this;return{battleAction:function(e){t.playersTurn?t.player.attack(t.enemy,e.attack):t.enemy.attack(t.player),t.player.stats.hp<=0||(t.enemy.stats.hp<=0?(t.player.stats.gainExperience(t.enemy.stats.givesExperience),t.player.restorePos(),t.enemy.restorePos(),t.stop()):t.cycle())}}},t.prototype.stop=function(){this.enemy.defeated=!0,this.active=!1,s.handler.unregister(this),this.battleMenu.stop()},t}();e.default=a},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(i(5)),a=o(i(1)),u=function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.call(this,e)||this}return n(e,t),e.prototype.draw=function(t,e,i,r){var n=this;t.save(),t.font="12px Arial";var o=new a.default(72,24),s=new a.default(8,0);t.translate(i.x+r.pos.x-(o.x+s.x)*this.menu.length,i.y+r.pos.y+r.size.y+o.y),this.menu.forEach(function(e){var i=e===n.selected[0];t.translate(o.x+s.x,0),t.font="12px Arial",t.fillStyle="#fff",e===n.selected[0]&&(t.fillStyle="#ddd",t.strokeRect(0,0,o.x,o.y)),e===n.currentOption&&(t.font="bold 12px Arial"),t.fillRect(0,0,o.x,o.y),t.fillStyle="#000",t.fillText(e.type,4,16),i&&e.menu&&e.menu.length&&e.menu.forEach(function(e,i){t.save(),e===n.currentOption?t.font="bold 12px Arial":t.font="12px Arial";var r=e.name?e.name:e;t.translate(0,18*(i+1)+6),t.fillText(r,0,16),t.restore()})}),t.restore()},e.prototype.register=function(){var t=this;return{keyup:function(e){var i=t.currentMenu,r=t.currentOption;switch(e.key){case"ArrowDown":t.hasSubMenu()?t.select():t.selected.length>1&&t.next();break;case"ArrowUp":r===i[0]?t.back():t.selected.length>1&&t.previous();break;case"ArrowLeft":1===t.selected.length&&t.previous();break;case"ArrowRight":1===t.selected.length&&t.next();break;case"Enter":"function"==typeof r.use&&r.use()}}}},e}(s.default);e.default=u},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(i(4)),a=o(i(29)),u=o(i(3)),l=o(i(30)),p=o(i(31)),h=o(i(1)),c=o(i(8)),d=i(0),f=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r.speed=new h.default(0,0),r.maxSpeed=i.x/10,r.sprites=[new u.default(a.default,2,0,0,1,4,8),new u.default(a.default,2,3,0,1,4,8),new u.default(a.default,2,2,0,1,4,8),new u.default(a.default,2,0,0,1,4,8),new u.default(a.default,2,1,0,1,4,8)],r.stats=new c.default({hp:10,atk:2,def:0,sp_atk:0,sp_def:0,spd:1}),r.inventory=new l.default,r.weapon=null,r.spells=[],d.handler.register(r),r.init(),r}return n(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"player"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dialogueName",{get:function(){return"Me"},enumerable:!0,configurable:!0}),e.prototype.update=function(e){this.locked||(this.pos.x+=this.speed.x,this.pos.y+=this.speed.y,t.prototype.update.call(this,e))},e.prototype.draw=function(e){t.prototype.draw.call(this,e),e.save(),e.translate(this.pos.x,this.pos.y),this.sprites[this.direction].draw(e),e.restore()},e.prototype.move=function(t){switch(t){case"ArrowLeft":this.speed.x=-this.maxSpeed;break;case"ArrowDown":this.speed.y=this.maxSpeed;break;case"ArrowRight":this.speed.x=this.maxSpeed;break;case"ArrowUp":this.speed.y=-this.maxSpeed}this.changeDirection()},e.prototype.stop=function(t){"ArrowLeft"===t&&this.speed.x<0&&(this.speed.x=0),"ArrowRight"===t&&this.speed.x>0&&(this.speed.x=0),"ArrowUp"===t&&this.speed.y<0&&(this.speed.y=0),"ArrowDown"===t&&this.speed.y>0&&(this.speed.y=0),this.changeDirection()},e.prototype.changeDirection=function(){this.locked||(this.speed.x>0?this.direction=4:this.speed.x<0?this.direction=2:this.speed.y>0?this.direction=3:this.speed.y<0&&(this.direction=1))},e.prototype.register=function(){var t=this;return{keydown:function(e){e.key.match(/Arrow/)&&t.move(e.key)},keyup:function(e){e.key.match(/Arrow/)&&t.stop(e.key)}}},e.prototype.init=function(){this.inventory.store(new p.default({name:"Basic Sword",description:"A basic bish sword.",damage:3})),this.inventory.store(new p.default({name:"Mace",description:"An effing mace. Watch out!",damage:10})),this.inventory.store(new p.default({name:"Pole Arm",description:"Swift and strong.",damage:5})),this.weapon=new p.default({name:"Basic Sword",description:"A basic bish sword.",damage:1})},e}(s.default);e.default=f},function(t,e,i){t.exports=i.p+"img/player-new.png"},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(i(5)),a=o(i(1)),u=function(t){function e(){var e=this;return(e=t.call(this,[{type:"item",description:"Items",menu:[]},{type:"equipable",description:"Equipment",menu:[]},{type:"special",description:"Special",menu:[]}])||this).active=!1,e.equipped={weapon:null,armor:null,spell:null},e}return n(e,t),e.prototype.store=function(t){this.menu.filter(function(e){return e.type===t.type})[0].menu.push(t)},e.prototype.draw=function(t,e,i){var r=this;t.save(),t.translate(-i.x,-i.y),t.fillStyle="rgba(200, 200, 200, .96)",t.fillRect(0,0,e.x,e.y),t.fillStyle="#75A",t.textAlign="left";var n=this.currentOption;this.selected.reduce(function(e,i,o){var s=o>0?r.selected[o-1].menu:r.menu;return e+s.reduce(function(r,s,u){var l=new a.default(48+200*o,48+48*(u+e+1));return t.save(),t.font="24px Arial",s===n&&(t.shadowColor="#75A",t.shadowOffsetX=2,t.shadowOffsetY=2,t.shadowBlur=4,t.font="bold 24px Arial"),t.fillText(s.description,l.x,l.y),t.restore(),r+(s===i?u:0)},0)},0),t.restore()},e.prototype.register=function(){var e=this;return[t.prototype.register.call(this),{keyup:function(t){"i"===t.key&&(e.active=!e.active)}}]},e}(s.default);e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(){function t(t){for(var e in t)this[e]=t[e];this.type="equipable"}return t.prototype.use=function(){r.handler.trigger("battleAction",this)},t}();e.default=n},function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),o=r(i(1)),s=function(){function t(t,e){this.game=e,this.ctx=t.getContext("2d"),this.buffer=document.createElement("canvas").getContext("2d"),this.triggerResize(),n.handler.register(this)}return t.prototype.draw=function(t){var e=this;this.buffer.clearRect(0,0,this.game.width,this.game.height),this.buffer.save(),this.buffer.translate(t.x,t.y),this.buffer.fillRect(0,0,this.game.width,this.game.height),this.game.level.map.draw(this.buffer),this.game.level.entities.forEach(function(i){i.draw(e.buffer,t)}),this.game.level.map.draw(this.buffer,!0),this.game.level.player.inventory.active&&this.game.level.player.inventory.draw(this.buffer,this.drawSize,t),this.game.battle&&this.game.battle.active&&this.game.battle.draw(this.buffer,this.drawSize),this.game.menu.active&&this.game.menu.draw(this.buffer,this.drawSize,t),this.buffer.restore(),this.ctx.clearRect(0,0,this.game.width,this.game.height),this.ctx.drawImage(this.buffer.canvas,0,0,this.buffer.canvas.width,this.buffer.canvas.height,0,0,this.ctx.canvas.width,this.ctx.canvas.height)},t.prototype.triggerResize=function(){if(window.innerWidth<this.game.resolution.x){var t=this.game.height/this.game.width,e=Math.floor(window.innerWidth),i=Math.floor(window.innerWidth*t);e%2==1&&e--,i%2==1&&i--,this.resize(e,i)}else this.resize(this.game.resolution.x,this.game.resolution.y)},t.prototype.resize=function(t,e){this.ctx.canvas.width=t,this.ctx.canvas.height=e,this.ctx.imageSmoothingEnabled=!1,this.buffer.canvas.width=t,this.buffer.canvas.height=e,this.buffer.imageSmoothingEnabled=!1,this.game.resize(t,e)},t.prototype.register=function(){var t=this;return{resize:function(e){return t.triggerResize()}}},Object.defineProperty(t.prototype,"drawSize",{get:function(){return new o.default(this.game.width,this.game.height)},enumerable:!0,configurable:!0}),t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this.events={},this.customEvents={}}return t.prototype.register=function(t){var e=this;if("function"!=typeof t.register)throw new Error("Target class does not have event register method");var i=t.register();Array.isArray(i)?i.forEach(function(i){return e.install(t,i)}):this.install(t,i)},t.prototype.install=function(t,e){var i=this,r=function(r){n.events.hasOwnProperty(r)||(n.events[r]=[],window.addEventListener(r,function(t){i.events[r].forEach(function(e){e.handle(t,i)})})),n.events[r].push({target:t,handle:e[r]})},n=this;for(var o in e)r(o)},t.prototype.unregister=function(t){for(var e in this.events)this.events[e]=this.events[e].filter(function(e){return e.target!==t})},t.prototype.trigger=function(t,e){var i=new CustomEvent(t,{detail:e});window.dispatchEvent(i)},t}();e.default=r},function(t,e,i){}]);